# incidents-classifier-weka

This project contains techniques for (1) processing the csv file generated by the incidentnts-collection project, (2) converting the csv files to arff (Weka) format, and (3) training and testing classifiers from the arff files.

Before running methods in this project, make sure that you have two files: (1) a csv file containing the TF-IDF scores for a collection of news article (e.g., [incidents-collection/src/training.csv](https://github.com/privacy-incidents-database/incidents-collection/blob/master/src/training.csv)), and (2) a text file that contains article codes (e.g., [incidents-collection/Article codes](https://github.com/privacy-incidents-database/incidents-collection/blob/master/Article%20codes)) for the articles in the training.csv file.

Note: The "isPrivacy" column in the training.csv file contains article codes. The value of "0" indicates that an atricle is not a privacy incident. The non-zero values indicate different types of privacy incidents.

Given the two files above, follow the steps below to run a classifier. The commands below assume that you have set the classpath appropriately.

(1) Pick a training set. 

`java edu.ncsu.csc.privacyincidents.util.CsvTrainingSetSelector "/PathTo/training.csv" "/PathTo/training_1.csv" "0:195,4:38,3:77,1:40,2:40"`

The first argument is the path to the input file, second is the output file, and the third argument says how many instances to select for each articles e.g., for the argument above we want to select 195 articles of code 0, 38 articles for code 4, and so on.

Note A: You can count the number of instances for each article code in the input file using the following shell command.

`awk -F, '{A[$2]++}END{for(i in A)print i,A[i]}' OFS=, training.csv | sort -t, -k2,2rn`

Note B: For now, we are only training binary classifiers. So in the output file, "0" values are retained as "0", but all non-zero values will be written as "1."

(2) Convert the csv file to arff file.

`java edu.ncsu.csc.privacyincidents.util.CsvToArffConverter /PathTo/training_1.csv /PathTo/training_1.arff`

(3) You can now use the arff file to train various classifiers on the GUI. The GUI is good for experimenting. We also have some classifiers within this project. These classifiers can be included in the automated pipeline.

(4) All classifiers within this project can be instantiated from the following class, with appropriate arguments.

`java edu.ncsu.csc.privacyincidents.classification.PrivacyClassifier -c SMO -v=/PathTo/training_1.arff`

The first argument following "-c" indicates the type of the classifier to use. The argument "-v" indicates that crossvalidation is to be performed and the argument following "-v" is the file to run crossvalidation on. See more details on the other argument types in the PrivacyClassifier class.

Note: There is a stopwords.txt file in the sr/main/resources folder; these are stemmed words. The PrivacyClassifier ignores features based on these words.
